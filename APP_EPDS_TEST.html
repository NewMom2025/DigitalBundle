<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Mom Well-being Check-In</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Font: Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #bbe0e0; /* Light teal/blue from cover */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }
        .container {
            background-color: #ffffff;
            border-radius: 1.5rem; /* More rounded corners */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            width: 100%;
            padding: 2rem;
            text-align: center;
        }
        .btn {
            background-color: #ee9461; /* Orange/peach from cover */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem; /* Rounded corners for buttons */
            font-weight: 600;
            transition: background-color 0.3s ease;
            cursor: pointer;
            border: none;
            display: inline-block;
            margin-top: 1.5rem;
        }
        .btn:hover {
            background-color: #d87c4a; /* Slightly darker orange */
        }
        .disclaimer {
            font-size: 0.875rem; /* text-sm */
            color: #ef4444; /* Red 500 - kept for urgency/safety */
            background-color: #fee2e2; /* Red 100 */
            border-left: 4px solid #ef4444;
            padding: 1rem;
            margin-top: 1.5rem;
            border-radius: 0.5rem;
            text-align: left;
        }
        .question-option {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            margin-bottom: 0.75rem;
            border: 1px solid #d1d5db; /* Gray 300 */
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
        }
        .question-option:hover {
            background-color: #f3f4f6; /* Gray 50 */
            border-color: #9ca3af; /* Gray 400 */
        }
        .question-option.selected {
            background-color: #ffebe0; /* Light orange/peach */
            border-color: #ee9461; /* Orange/peach from cover */
            box-shadow: 0 0 0 2px #ffc7a8; /* Lighter orange ring */
        }
        .question-option input[type="radio"] {
            margin-right: 0.75rem;
            accent-color: #ee9461; /* Orange/peach from cover */
        }
        .progress-bar-container {
            width: 100%;
            background-color: #e5e7eb; /* Gray 200 */
            border-radius: 0.5rem;
            height: 10px;
            overflow: hidden;
            margin-top: 1rem;
        }
        .progress-bar {
            height: 100%;
            background-color: #ee9461; /* Orange/peach from cover */
            border-radius: 0.5rem;
            transition: width 0.3s ease-in-out;
        }
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #ee9461; /* Orange/peach from cover */
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 2rem auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .cover-image {
            max-width: 250px; /* Adjust size as needed */
            height: auto;
            border-radius: 1rem; /* Rounded corners for the image */
            margin-bottom: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
    </style>
</head>
<body>
    <div id="app" class="container">
        <!-- Intro Screen -->
        <div id="intro-screen" class="screen">
            <!-- Corrected image source for direct public URL -->
            <img src="https://newmom2025.github.io/DigitalBundle/ebook%20Cover.png" alt="The New Mom Survival Kit Ebook Cover" class="cover-image mx-auto" onerror="this.onerror=null;this.src='https://placehold.co/250x350/cccccc/333333?text=Ebook+Cover';">
            <h1 class="text-3xl font-bold text-gray-800 mb-4">Your Well-being Check-In</h1>
            <p class="text-gray-600 mb-6 leading-relaxed">Motherhood is an incredible journey, but it's also a challenging one. It's okay to not feel okay. This short, confidential check-in is here to help you understand your emotional well-being during this postpartum period.</p>
            <div class="disclaimer">
                <p class="font-semibold mb-2">Important Disclaimer:</p>
                <p>This online assessment is for informational and screening purposes only. It is not a diagnostic tool and cannot replace a professional medical or psychological evaluation. If you are experiencing symptoms of postpartum depression or any other mental health concern, please consult with a qualified healthcare provider immediately.</p>
                <p class="mt-2 font-bold">If you are having thoughts of harming yourself or your baby, please seek immediate emergency help.</p>
            </div>
            <p class="text-gray-600 mt-6">This test consists of 10 simple questions and takes about 2-3 minutes to complete. Your responses are confidential.</p>
            <button id="start-test-btn" class="btn">Start Test</button>
        </div>

        <!-- Question Screen -->
        <div id="question-screen" class="screen hidden">
            <h2 id="question-text" class="text-xl font-semibold text-gray-800 mb-6"></h2>
            <div id="options-container" class="space-y-3">
                <!-- Options will be dynamically loaded here -->
            </div>
            <div class="progress-bar-container">
                <div id="progress-bar" class="progress-bar" style="width: 0%;"></div>
            </div>
            <p id="progress-text" class="text-sm text-gray-500 mt-2">Question 0 of 10</p>
            <button id="next-question-btn" class="btn mt-6" disabled>Next</button>
        </div>

        <!-- Loading Screen -->
        <div id="loading-screen" class="screen hidden">
            <div class="loading-spinner"></div>
            <p class="text-lg text-gray-700">Calculating your results...</p>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="screen hidden">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Your Well-being Check-In Results</h2>
            <p id="score-display" class="text-xl font-semibold text-gray-700 mb-4"></p>
            <div id="result-interpretation" class="text-gray-700 text-left mb-6 leading-relaxed p-4 bg-blue-50 border border-blue-200 rounded-lg">
                <!-- Interpretation will be loaded here -->
            </div>
            <div class="disclaimer">
                <p class="font-semibold mb-2">Important Reminder:</p>
                <p>This online assessment is for informational and screening purposes only. It is not a diagnostic tool and cannot replace a professional medical or psychological evaluation. Always talk to your doctor or healthcare provider about any concerns regarding your mental or physical health.</p>
            </div>
            <h3 class="text-xl font-bold text-gray-800 mt-8 mb-4">Next Steps & Resources:</h3>
            <ul class="list-disc list-inside text-left text-gray-700 space-y-2">
                <li><span class="font-semibold">Consult Your Doctor:</span> Speak with your OB/GYN, pediatrician, or primary care physician as soon as possible to discuss your feelings and these results.</li>
                <li><span class="font-semibold">National Maternal Mental Health Hotline:</span> For immediate support, call or text 1-833-TLC-MAMA (1-833-852-6262). Available 24/7, in English and Spanish.</li>
                <li><span class="font-semibold">Postpartum Support International (PSI):</span> Visit <a href="https://www.postpartum.net/" target="_blank" class="text-indigo-600 hover:underline">postpartum.net</a> to find local support, online groups, and a directory of mental health professionals specializing in maternal mental health.</li>
                <li><span class="font-semibold">Your "New Mom Survival Kit" Ebook:</span> While not a substitute for professional help, our comprehensive ebook offers evidence-based routines and sanity-saving tools to support your well-being during baby's first 6 months. <a href="YOUR_EBOOK_LINK_HERE" class="text-indigo-600 hover:underline">Learn More & Get Your Copy!</a></li>
            </ul>
            <button id="retake-test-btn" class="btn mt-8">Retake Test</button>
        </div>
    </div>

    <script>
        // DOM Elements
        const introScreen = document.getElementById('intro-screen');
        const questionScreen = document.getElementById('question-screen');
        const loadingScreen = document.getElementById('loading-screen');
        const resultsScreen = document.getElementById('results-screen');

        const startTestBtn = document.getElementById('start-test-btn');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const nextQuestionBtn = document.getElementById('next-question-btn');

        const scoreDisplay = document.getElementById('score-display');
        const resultInterpretation = document.getElementById('result-interpretation');
        const retakeTestBtn = document.getElementById('retake-test-btn');

        // Test State
        let currentQuestionIndex = 0;
        let userAnswers = []; // Stores scores for each question
        let totalScore = 0;

        // EPDS Questions and Scoring (Standard EPDS structure)
        // Each question has 4 options, scored 0-3.
        // For questions 1, 2, 4, the scoring is 0, 1, 2, 3.
        // For questions 3, 5, 6, 7, 8, 9, 10, the scoring is 3, 2, 1, 0.
        const epdsQuestions = [
            {
                question: "I have been able to laugh and see the funny side of things",
                options: [
                    { text: "As much as I always could", score: 0 },
                    { text: "Not quite as much now", score: 1 },
                    { text: "Definitely not so much now", score: 2 },
                    { text: "Not at all", score: 3 }
                ]
            },
            {
                question: "I have looked forward with enjoyment to things",
                options: [
                    { text: "As much as I always did", score: 0 },
                    { text: "Not quite as much as I used to", score: 1 },
                    { text: "Definitely not so much now", score: 2 },
                    { text: "Not at all", score: 3 }
                ]
            },
            {
                question: "I have blamed myself unnecessarily when things went wrong",
                options: [
                    { text: "Yes, most of the time", score: 3 },
                    { text: "Yes, some of the time", score: 2 },
                    { text: "Not very often", score: 1 },
                    { text: "No, never", score: 0 }
                ]
            },
            {
                question: "I have been anxious or worried for no good reason",
                options: [
                    { text: "No, not at all", score: 0 },
                    { text: "Hardly ever", score: 1 },
                    { text: "Yes, sometimes", score: 2 },
                    { text: "Yes, very often", score: 3 }
                ]
            },
            {
                question: "I have felt scared or panicky for no very good reason",
                options: [
                    { text: "Yes, quite a lot", score: 3 },
                    { text: "Yes, sometimes", score: 2 },
                    { text: "No, not much", score: 1 },
                    { text: "No, not at all", score: 0 }
                ]
            },
            {
                question: "Things have been getting on top of me",
                options: [
                    { text: "Yes, most of the time I haven't been able to cope", score: 3 },
                    { text: "Yes, sometimes I haven't been coping as well as usual", score: 2 },
                    { text: "No, most of the time I have coped quite well", score: 1 },
                    { text: "No, I have been coping as well as ever", score: 0 }
                ]
            },
            {
                question: "I have been so unhappy that I have had difficulty sleeping",
                options: [
                    { text: "Yes, most of the time", score: 3 },
                    { text: "Yes, sometimes", score: 2 },
                    { text: "Not very often", score: 1 },
                    { text: "No, not at all", score: 0 }
                ]
            },
            {
                question: "I have felt sad or miserable",
                options: [
                    { text: "Yes, most of the time", score: 3 },
                    { text: "Yes, quite often", score: 2 },
                    { text: "Not very often", score: 1 },
                    { text: "No, not at all", score: 0 }
                ]
            },
            {
                question: "I have been so unhappy that I have been crying",
                options: [
                    { text: "Yes, most of the time", score: 3 },
                    { text: "Yes, quite often", score: 2 },
                    { text: "Only occasionally", score: 1 },
                    { text: "No, never", score: 0 }
                ]
            },
            {
                question: "The thought of harming myself has occurred to me",
                options: [
                    { text: "Yes, quite often", score: 3 },
                    { text: "Sometimes", score: 2 },
                    { text: "Hardly ever", score: 1 },
                    { text: "Never", score: 0 }
                ]
            }
        ];

        // --- Functions to manage screens ---
        function showScreen(screenId) {
            const screens = document.querySelectorAll('.screen');
            screens.forEach(screen => screen.classList.add('hidden'));
            document.getElementById(screenId).classList.remove('hidden');
        }

        function startTest() {
            currentQuestionIndex = 0;
            userAnswers = new Array(epdsQuestions.length).fill(null); // Reset answers
            totalScore = 0;
            loadQuestion(currentQuestionIndex);
            showScreen('question-screen');
        }

        function loadQuestion(index) {
            const question = epdsQuestions[index];
            questionText.textContent = question.question;
            optionsContainer.innerHTML = ''; // Clear previous options
            nextQuestionBtn.disabled = true; // Disable next button until option is selected

            question.options.forEach((option, optionIndex) => {
                const optionDiv = document.createElement('label');
                optionDiv.className = 'question-option';
                optionDiv.innerHTML = `
                    <input type="radio" name="question-${index}" value="${option.score}" data-option-index="${optionIndex}">
                    <span>${option.text}</span>
                `;
                optionsContainer.appendChild(optionDiv);

                // Add event listener for selecting an option
                optionDiv.addEventListener('click', () => {
                    // Remove 'selected' class from all options for this question
                    optionsContainer.querySelectorAll('.question-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    // Add 'selected' class to the clicked option
                    optionDiv.classList.add('selected');
                    userAnswers[index] = option.score; // Store the score
                    nextQuestionBtn.disabled = false; // Enable next button
                });

                // If this option was previously selected, mark it
                if (userAnswers[index] !== null && userAnswers[index] === option.score) {
                     optionDiv.classList.add('selected');
                     optionDiv.querySelector('input[type="radio"]').checked = true;
                     nextQuestionBtn.disabled = false;
                }
            });

            updateProgressBar();
        }

        function updateProgressBar() {
            const progressPercentage = ((currentQuestionIndex + 1) / epdsQuestions.length) * 100;
            progressBar.style.width = `${progressPercentage}%`;
            progressText.textContent = `Question ${currentQuestionIndex + 1} of ${epdsQuestions.length}`;
        }

        function handleNextQuestion() {
            if (userAnswers[currentQuestionIndex] === null) {
                // This should ideally be prevented by disabling the button, but good for fallback
                return;
            }

            currentQuestionIndex++;
            if (currentQuestionIndex < epdsQuestions.length) {
                loadQuestion(currentQuestionIndex);
            } else {
                calculateResults();
            }
        }

        function calculateResults() {
            showScreen('loading-screen'); // Show loading spinner
            totalScore = userAnswers.reduce((sum, score) => sum + score, 0);

            // Simulate a short delay for calculation (optional, for UX)
            setTimeout(() => {
                displayResults();
            }, 1500);
        }

        function displayResults() {
            scoreDisplay.textContent = `Your Score: ${totalScore} / 30`;
            let interpretationText = '';

            // EPDS Scoring Interpretation (General Guidelines)
            // 0-9: Generally well, minimal symptoms
            // 10-12: Possible mild depression, consider professional discussion
            // 13+: Possible moderate to severe depression, strong recommendation for professional help
            // Note: A score of 13 or more suggests probable depression. A score of 10-12 suggests possible minor depression.
            // Any score on question 10 (thoughts of self-harm) should trigger an immediate recommendation for professional help.

            if (userAnswers[9] > 0) { // If any score on question 10 (harming self)
                interpretationText = `
                    <p class="font-semibold text-red-700 mb-2">Based on your responses, particularly regarding thoughts of self-harm, it is CRITICAL to seek immediate professional help.</p>
                    <p>Please know you are not alone, and help is available. It is **very important** to speak with your doctor, OB/GYN, or a mental health professional as soon as possible to discuss your results and get the support you deserve.</p>
                `;
            } else if (totalScore >= 13) {
                interpretationText = `
                    <p class="font-semibold text-red-700 mb-2">Your responses suggest you may be experiencing symptoms of postpartum depression.</p>
                    <p>Please know you are not alone, and help is available. It is **very important** to speak with your doctor, OB/GYN, or a mental health professional as soon as possible to discuss your results and get the support you deserve.</p>
                `;
            } else if (totalScore >= 10) {
                interpretationText = `
                    <p class="font-semibold text-orange-700 mb-2">Your responses indicate you might be experiencing some emotional difficulties.</p>
                    <p>Many new mothers feel this way, and support can make a big difference. It's highly recommended to discuss your feelings with your doctor or a mental health professional.</p>
                `;
            } else {
                interpretationText = `
                    <p class="font-semibold text-green-700 mb-2">Your responses suggest you are coping well and experiencing typical postpartum adjustments.</p>
                    <p>Continue to prioritize self-care and reach out if anything changes. Remember, it's always good to check in with your healthcare provider about your well-being.</p>
                `;
            }

            resultInterpretation.innerHTML = interpretationText;
            showScreen('results-screen');
        }

        // --- Event Listeners ---
        startTestBtn.addEventListener('click', startTest);
        nextQuestionBtn.addEventListener('click', handleNextQuestion);
        retakeTestBtn.addEventListener('click', () => {
            showScreen('intro-screen'); // Go back to intro to restart
        });

        // Initial screen on load
        document.addEventListener('DOMContentLoaded', () => {
            showScreen('intro-screen');
        });

    </script>
</body>
</html>
